{% extends 'layout.html' %}
{% load static %}
{% block head %}
<div class="item header">态势研判</div>


{% endblock %}
{% block column1 %}
<div class="ui centered grid" style="height:150%" >
    <div class="row" style="height: 45%">
        
        <div id="index-system" class="column" style="width:75%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="height: 102%;background-color: #ffffff"   id="chart0" >指标体系</div>
        </div>

     
        <div class="column" style="width:25%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="height: 50%;background-color: #ffffff"   id="chart1" >总质效排名</div>
            <div class="ui segment container row" style="height:47.5%;background-color: #ffffff" id="chart2"></div>
        </div>
    </div>

    <div class="row" style="height: 40%">
        <div class="ui segment container column" style="width: 26%;" id="">
            <div class="ui selection dropdown" style="margin-left: 30%;">地区
                <input type="hidden" name="地区">
                <i class="dropdown icon"></i>
                <div class="default text"><i class="world icon"></i>{{ range_data.1.name | safe}}</div>
                <div class="menu">
                    <a class="item" href="javascript:void(0);" onclick="chart_paint('chart5',{{ range_data.1 | safe}})"><i class="world icon"></i>立案管理排名</a>
                    <a class="item" href="javascript:void(0);" onclick="chart_paint('chart5',{{ range_data.2 | safe}})"><i class="world icon"></i>审判办理排名</a>
                    <a class="item" href="javascript:void(0);" onclick="chart_paint('chart5',{{ range_data.3 | safe}})"><i class="world icon"></i>结案管理排名</a>
                    <a class="item" href="javascript:void(0);" onclick="chart_paint('chart5',{{ range_data.4 | safe}})"><i class="world icon"></i>案后监督排名</a>
                </div>
            </div>
            <div class="ui container row" style="text-align: center;white-space: pre-wrap;font-size: 20px;line-height: 1.5em">
    {#            具体的排名选择主要分为以下部分：#}
    {#            立案管理排名#}
    {#            审判办理排名#}
    {#            结案管理排名#}
    {#            案后监督排名#}
            </div>
        </div>
        <div class="ui segment container column" style="width: 72%;"  id="" >
            <div class="ui container" style="height: 90%;width:80%;margin-top: 2em" id="chart5"></div>
        </div>
    </div>
    <div class="ui segment container row" style="height:35%;background-color: #ffffff">
        <div class="ui  container row" style="height: 10%;width: 100%">
            <span class="ui header " style="height:8%;">一审指标分析</span>
            <p></p>
                <div class="text" style="font-size: 16px">一审期间，调解率对于服判息诉率有显著提升作用</div>
            <p></p>
        </div>
        <div class="ui divider" style="width: 100%;margin:2rem 1rem"></div>

        <div class="ui container column" style="background-color: #ffffff;height: 80%;width: 50%" id="chart9"></div>

        <div class="ui container column" style="background-color: #ffffff;height: 80%;width:50%" id="chart10"></div>
    </div>
    <div class="ui segment container row" style="height:35%;background-color: #ffffff">
        <div class="ui  container row" style="height: 10%;width: 100%">
            <span class="ui header " style="height:8%;">结案执行指标分析</span>
            <p></p>
            <div class="text" style="font-size: 16px">结案管理期间，结案率是促进结案率复合指数最重要的指标，结案率提高对于负荷指数有显著推动作用</div>
            <p></p>
        </div>
        <div class="ui divider" style="width: 100%;margin:2rem 1rem"></div>

        <div class="ui container column" style="background-color: #ffffff;height: 80%;width: 50%" id="chart11"></div>

        <div class="ui container column" style="background-color: #ffffff;height: 80%;width:50%" id="chart12"></div>

    </div>

<!--**********************************营商环境****************************-->

    <div class="row" style="height: 51%">
        <div class="column" style="width:28%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="height: 100%;background-color: #ffffff" id="chart21"></div>
        </div>

        <div class="column" style="width:39%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="height:100%;background-color: #ffffff" id="chart22"></div>
        </div>

        <div class="column" style="width:33%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="height: 50%;background-color: #ffffff" id="chart23"></div>
            <div class="ui segment container row" style="height: 47.5%;background-color: #ffffff" id="chart24"></div>
        </div>
    </div>

    <div class="row" style="height: 65%; margin-top: 20px">
        <div class="column" style="width: 66%;" id="chart25">
            <div class="ui segment container row" style="width: 100%; height: 100%" id="">
                <h2 class="ui center aligned dividing header">
                    <div class="ui small message">营商指标年度对比 (重庆)</div>
                </h2>
                <table class="ui very basic center aligned table" style="font-size: large">
                    <thead>
                        <tr class="center aligned">
                            <th class="three wide">主题</th>
                            <th class="two wide">DB 2019分数</th>
                            <th class="two wide">DB 2019排名</th>
                            <th class="two wide">DB 2018分数</th>
                            <th class="two wide">DB 2018排名</th>
                            <th class="two wide">排名变化</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="center aligned active">
                            <td>总体</td>
                            <td>77.9</td>
                            <td>31</td>
                            <td>74.0</td>
                            <td>54</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>23</td>
                        </tr>
                        <tr class="center aligned">
                            <td>企业创办<i class="check icon" style="font-size: 12px"></i></td>
                            <td>94.1</td>
                            <td>27</td>
                            <td>93.4</td>
                            <td>31</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>4</td>
                        </tr>
                        <tr class="center aligned active">
                            <td>
                                <a href="#pccl">破产处理<i class="check icon" style="font-size: 12px"></i></a>
                            </td>
                            <td>62.1</td>
                            <td>51</td>
                            <td>55.9</td>
                            <td>78</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>27</td>
                        </tr>
                        <tr class="center aligned">
                            <td>施工许可<i class="check icon" style="font-size: 12px"></i></td>
                            <td>77.3</td>
                            <td>33</td>
                            <td>65.2</td>
                            <td>48</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>15</td>
                        </tr>
                        <tr class="center aligned">
                            <td>电力许可<i class="check icon" style="font-size: 12px"></i></td>
                            <td>95.4</td>
                            <td>12</td>
                            <td>92.0</td>
                            <td>17</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>5</td>
                        </tr>
                        <tr class="center aligned">
                            <td>财产登记<i class="check icon" style="font-size: 12px"></i></td>
                            <td>81.0</td>
                            <td>28</td>
                            <td>80.8</td>
                            <td>30</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>2</td>
                        </tr>
                        <tr class="center aligned active">
                            <td>
                                <a href="#htzx">合同执行<i class="check icon" style="font-size: 12px"></i></a>
                            </td>
                            <td>80.9</td>
                            <td>5</td>
                            <td>79.0</td>
                            <td>11</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>6</td>
                        </tr>
                        <tr class="center aligned">
                            <td>信贷获取<i class="x icon" style="font-size: 12px"></i></td>
                            <td>60.0</td>
                            <td>80</td>
                            <td>60.0</td>
                            <td>77</td>
                            <td><i class="arrow down icon" style="font-size: 12px; color: #8B0000"></i>3</td>
                        </tr>
                        <tr class="center aligned">
                            <td>中小投资者保护<i class="check icon" style="font-size: 12px"></i></td>
                            <td>72.0</td>
                            <td>28</td>
                            <td>62.0</td>
                            <td>54</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>26</td>
                        </tr>
                        <tr class="center aligned">
                            <td>税务缴纳<i class="check icon" style="font-size: 12px"></i></td>
                            <td>70.1</td>
                            <td>105</td>
                            <td>67.9</td>
                            <td>121</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>16</td>
                        </tr>
                        <tr class="center aligned">
                            <td>跨境贸易<i class="check icon" style="font-size: 12px"></i></td>
                            <td>86.5</td>
                            <td>56</td>
                            <td>83.4</td>
                            <td>61</td>
                            <td><i class="arrow up icon" style="font-size: 12px; color: #006400"></i>5</td>
                        </tr>
                    </tbody>
                </table>
                <div class="ui divider"></div>
                </br>
                <i class="blue check icon"></i>
                <span>=改革使得营商更加便捷</span><span>&ensp;</span>
                <i class="blue x icon"></i>
                <span>=改革使得营商更加困难</span><span>&ensp;&ensp;</span>
                <i class="exclamation circle icon"></i>
                <span>破产处理与合同执行是两个与司法相关的一级指标</span>
            </div>
        </div>

        <div class="column" style="width: 32%;height:100%;background-color: #ffffff">
            <div class="ui segment container row" style="width: 100%; height: 49%" id="chart32"></div>
            <div class="ui segment container row" style="width: 100%; height: 49%" id="chart33"></div>
        </div>
    </div>

    <div class="row" style="height: 45%; margin-top: 20px">
        <div class="ui segment container row" style="height: 11%; width:96.6%" id="pccl">
            <h3 class="ui center header" style="font-size: 21px">
                营商环境司法指标-破产处理
            </h3>
        </div>

        <div class="ui column" style="background-color: #ffffff;height: 100%;width: 58%">
            <div class="ui segment container row" style="height: 100%;background-color: #ffffff" id="chart26">
                <p></p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="hand point right icon"></i>指标概述
                </h4>
                <p align="center" style="font-size: large">破产处理指标评估了破产程序的时间和成本，
                    归纳了破产法规中存在的程序障碍，并衡量了资产回收情况。
                </p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="bar chart line icon"></i>具体数值
                </h4>
                <table class="ui center large very basic black table" style="font-size: 16px">
                    <thead>
                        <tr class="left aligned">
                            <th class="five wide">二级指标</th>
                            <th class="two wide">重庆</th>
                            <th class="two wide">东亚及太平洋地区</th>
                            <th class="two wide">高收入经济体</th>
                            <th class="two wide">表现最佳国家</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>回收率 (百分比)</td>
                            <td>36.9</td>
                            <td>35.5</td>
                            <td>70.2</td>
                            <td>92.9 (挪威)</td>
                        </tr>
                        <tr>
                            <td>时间 (年)</td>
                            <td>1.7</td>
                            <td>2.6</td>
                            <td>1.7</td>
                            <td>0.4 (爱尔兰)</td>
                        </tr>
                        <tr>
                            <td>成本 (资产价值的%)</td>
                            <td>22.0</td>
                            <td>20.6</td>
                            <td>9.3</td>
                            <td>1.0 (挪威)</td>
                        </tr>
                        <tr>
                            <td>结果 (0为零散销售， 1为持续经营)</td>
                            <td>0</td>
                            <td>..</td>
                            <td>..</td>
                            <td>..</td>
                        </tr>
                        <tr>
                            <td>破产框架力度指数 (0-16)</td>
                            <td>13.5</td>
                            <td>7.0</td>
                            <td>11.9</td>
                            <td>无表现最佳者</td>
                        </tr>
                    </tbody>
                </table>
                <div class="ui divider"></div>
                </br></br>
                <a href="#"><i class="info circle icon"></i>查看详细计算方法</a>
            </div>
        </div>

        <div class="ui column" style="background-color: #ffffff;height: 100%;width: 40%">
            <div class="ui segment container row" style="height: 100%;background-color: #ffffff">
                <p></p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="hand point right icon"></i>计算规则
                </h4>
                <p align="center" style="font-size: large">指标得分由营商报告中使用的归一化方法计算得出。
                </p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="bar chart line icon"></i>得分情况
                </h4>
                <div id="chart27" style="width: 45%; height: 53%; float: left"></div>
                <div id="chart28" style="width: 45%; height: 53%; float: left"></div>
                <div  style="width: 100%; height: 10%; float: left">
                    <p></p>
                    <br/><p></p>
                    <i class="exclamation circle icon"></i>破产处理指标的分数为各个分指标的分数的简单平均值。</div>
                </div>
        </div>
    </div>

    <div class="row" style="height: 41%; margin-top: 95px">
        <div class="ui segment container row" style="height: 13%; width:96.6%" id="htzx">
            <h3 class="ui center header" style="font-size: 21px">
                营商环境司法指标-合同执行
            </h3>
        </div>
            <!--<div class="ui container row" style="height: 10%;width: 100%; margin-top: 20px; margin-bottom: 30px">
                <div class="ui divider" style="width: 100%"></div>
                <span class="ui header " style="height:8%;font-size: 21px">营商环境司法指标-合同执行</span>
                <p></p>
                <p></p>
            </div>-->
        <div class="ui column" style="background-color: #ffffff;height: 100%;width: 58%">
            <div class="ui segment container row" style="height: 100%;background-color: #ffffff" id="chart28">
                <p></p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="hand point right icon"></i>指标概述
                </h4>
                <p align="center" style="font-size: large">合同执行指标衡量了解决商业纠纷所耗费的时间、成本及司法程序质量，
                    从而评估法院审判的质量和效率。
                </p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="bar chart line icon"></i>具体数值
                </h4>
                <table class="ui center large very basic black table" style="font-size: 16px">
                    <thead>
                        <tr class="left aligned">
                            <th class="five wide">二级指标</th>
                            <th class="two wide">重庆</th>
                            <th class="two wide">东亚及太平洋地区</th>
                            <th class="two wide">高收入经济体</th>
                            <th class="two wide">表现最佳国家</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>时间 (天数)</td>
                            <td>485</td>
                            <td>581.1</td>
                            <td>589.6</td>
                            <td>120 (新加坡)</td>
                        </tr>
                        <tr>
                            <td>成本 (占索赔额百分比)</td>
                            <td>15.1</td>
                            <td>47.2</td>
                            <td>21.5</td>
                            <td>0.1 (不丹)</td>
                        </tr>
                        <tr>
                            <td>司法程序质量指数 (0-18)</td>
                            <td>16.5</td>
                            <td>8.1</td>
                            <td>11.7</td>
                            <td>无最佳表现者</td>
                        </tr>
                    </tbody>
                </table>
                <div class="ui divider"></div>
                </br></br></br></br>
                <a href="#"><i class="info circle icon"></i>查看详细计算方法</a>
            </div>
        </div>

        <div class="ui column" style="background-color: #ffffff;height: 100%;width: 40%">
            <div class="ui segment container row" style="height: 100%;background-color: #ffffff">
                <p></p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="hand point right icon"></i>计算规则
                </h4>
                <p align="center" style="font-size: large">指标得分由营商报告中使用的归一化方法计算得出。</p>
                <h4 class="ui horizontal divider header" style="font-size: large">
                    <i class="bar chart line icon"></i>得分情况
                </h4>
                <div id="chart29" style="width: 33%; height: 53%; float: left"></div>
                <div id="chart30" style="width: 33%; height: 53%; float: left"></div>
                <div id="chart31" style="width: 33%; height: 53%; float: left"></div>
                <div  style="width: 100%; height: 10%; float: left">
                    </br><p></p>
                    <i class="exclamation circle icon"></i>合同执行指标的分数为各个分指标的分数的简单平均值。
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block jschart %}
<script src="{% static 'js/echarts.min.js' %}"></script>
<script>
    //指标体系树状图
    function drawTree(chart_name){
        let myChart = echarts.init(document.getElementById("index-system"))
        myChart.showLoading(); //显示Loading标志； 
        $.get('{% url 'tree' %}', function (data) {
            myChart.hideLoading();//得到数据后隐藏Loading标志

            echarts.util.each(data.children, function (datum, index) {
                index % 2 === 0 && (datum.collapsed = true);
            });//间隔展开子数据

            myChart.setOption(option = {
                tooltip: {
                    trigger: 'item',
                    triggerOn: 'mousemove'//提示框触发的条件，默认mousemove|click（鼠标点击和移动时触发）。可选mousemove：鼠标移动时，click：鼠标点击时，none：
                },
                series: [ //系列列表
                    {
                        type: 'tree', //树形结构

                        data: [data],

                        top: '1%',
                        left: '7%',
                        bottom: '1%',
                        right: '20%',

                        symbolSize: 7,

                        label: {
                            position: 'left',
                            verticalAlign: 'middle',
                            align: 'right',
                            fontSize: 9
                        },

                        leaves: {//叶子节点的特殊配置，如上面的树图示例中，叶子节点和非叶子节点的标签位置不同
                            label: {
                                position: 'right',
                                verticalAlign: 'middle',
                                align: 'left'
                            }
                        },

                        expandAndCollapse: true,
                        animationDuration: 550,
                        animationDurationUpdate: 750
                    }
                ]
            });
        });
    }
    //排名图函数，输入为div的id和作图数据
    function chart_paint(chart_name, chart_data) {
              {#console.log(chart_name);#}
              {#console.log(chart_data);#}
              var chart = Highcharts.chart(chart_name,{
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: chart_data['name']
                    },
                    credits: {
                        enabled: false
                    },
                    exporting: {
                        enabled: false,
                    },
                    xAxis: {
                        categories: chart_data['region'],
                        crosshair: true
                    },
                    yAxis: {
                        min: 0,
                        title: {
                            text: '得分'
                        }
                    },
                    tooltip: {
                        // head + 每个 point + footer 拼接成完整的 table
                        headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
                        pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
                        '<td style="padding:0"><b>{point.y:.1f} 分</b></td></tr>',
                        footerFormat: '</table>',
                        shared: true,
                        useHTML: true
                    },
                    plotOptions: {
                        column: {
                            borderWidth: 0
                        }
                    },
                    series: [chart_data['score']]
                });
          }
    function chart_paint_his(chart_name, chart_data) {
              {#console.log(chart_name);#}
              {#console.log(chart_data);#}
              var chart = Highcharts.chart(chart_name,{
                chart: {
                    type: 'bar'
                },
                credits:{
                        enabled:false
                },
                title: {
                text: chart_data['name']
                },

                exporting:{
                enabled:false,
                },
                legend:{
                        enabled:false
                },
                xAxis: {
                categories: chart_data['region'],
                title: {
                text: null
                }
                },
                yAxis: {
                min: 0,
                title: {
                text: '得分',
                align: 'high'
                },

                },

                plotOptions: {
                bar: {
                dataLabels: {
                    enabled: true,
                    allowOverlap: true // 允许数据标签重叠
                }
                }
                },

                series: [ {
                name: '',
                data: chart_data['score']['data']
                }]
              });
          }
    //饼图函数，输入id和饼图数据
    function pie_paint(chart_name, chart_data){
        Highcharts.chart(chart_name, {
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            credits:{
                enabled:false,
            },
            exporting:{
                enabled:false,
            },
            title: {
                text: chart_data['name']
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                name: '案件数',
                colorByPoint: true,
                data: chart_data['data']
            }]
        })
    }
    function pie_paint1(chart_name, chart_data){
        Highcharts.chart(chart_name, {
            chart: {
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false,
                type: 'pie'
            },
            credits:{
                enabled:false,
            },
            exporting:{
                enabled:false,
            },
            colors: ['#058DC7', '#50B432', '#ED561B', '#DDDF00',
                    '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4','#058DC7', '#50B432', '#ED561B', '#DDDF00',
                    '#e5b58c', '#afffa8', '#ff939f', '#abfdff', '#6AF9C4'],
            title: {
                text: chart_data['name']
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
            },
            plotOptions: {
                pie: {
                    size:300,
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                name: '案件数',
                colorByPoint: true,
                data: chart_data['data']
            }]
        })
    }

    //热力图函数
    $.getJSON('https://data.jianshukeji.com/jsonp?filename=geochina/chongqing.json&callback=?', function(mapdata) {
            var data = {{ map | safe }};
            map1 = new Highcharts.Map('chart2', {
                title: {
                    text: '重庆地区法院质效得分'
                },
                mapNavigation: {
                    enabled: true,
                    buttonOptions: {
                        verticalAlign: 'bottom'
                    }
                },
                          credits:{
                                enabled:false,
                            },
                            exporting:{
                                enabled:false,
                            },
                colorAxis: {
                    min: 70,
                    minColor: '#fff',
                    maxColor: '#0087ee',
                    labels:{
                        style:{
                            "color":"red","fontWeight":"bold"
                        }
                    }
                },
                series: [{
                    data: data,
                    mapData: mapdata,
                    joinBy: 'name',
                    name: '重庆市地图'
                }]
            });
});
    //柱状图函数，输入id和柱状图数据
    function histogram_paint(chart_name, chart_data){
        var chart = Highcharts.chart(chart_name, {
                chart: {
                    type: 'column'
                },
                title: {
                    text: chart_data['name']
                },
                exporting:{
                    enabled:false
                },
                credits:{
                    enabled:false
                },
                xAxis: {
                    categories: chart_data['region']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: '指数得分'
                    },
                    stackLabels: {  // 堆叠数据标签
                        enabled: true,
                        style: {
                            fontWeight: 'bold',
                            color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                        }
                    }
                },
                legend: {
                    align: 'right',
                    x: -30,
                    verticalAlign: 'top',
                    y: 25,
                    floating: true,
                    backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
                    borderColor: '#CCC',
                    borderWidth: 1,
                    shadow: false
                },
                tooltip: {
                    formatter: function () {
                        return '<b>' + this.x + '</b><br/>' +
                            this.series.name + ': ' + this.y + '<br/>' +
                            '总分: ' + this.point.stackTotal;
                    }
                },
                plotOptions: {
                    column: {
                        stacking: 'normal',
                        dataLabels: {
                            enabled: true,
                            color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
                            style: {
                                // 如果不需要数据标签阴影，可以将 textOutline 设置为 'none'
                                textOutline: '1px 1px black'
                            }
                        }
                    }
                },
                series: chart_data['data']
            });
    }
    // drawTree('chart0');
    chart_paint_his('chart1', {{ range_data.0 | safe}});
    chart_paint('chart5', {{ range_data.1 | safe}});
    // pie_paint1('chart3',{{ pie_data.0 | safe }});
    pie_paint('chart9',{{ pie_data.1 | safe }});
    pie_paint('chart11',{{ pie_data.2 | safe }});
    histogram_paint('chart10', {{ histogram_data.0 | safe }});
    histogram_paint('chart12', {{ histogram_data.1 | safe }});
    //折线图函数
//////////////////////////////////////营商环境\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\ 


// 条状图函数，输入为id和作图数据
function bar_chart(chart_name, chart_data) {
    {#console.log(chart_name);#}
    {#console.log(chart_data);#}
    var chart = Highcharts.chart(chart_name, {
        chart: {
            type: 'bar'
        },
        credits: {
            enabled: false
        },
        title: {
            text: chart_data['title']
        },

        exporting: {
            enabled: false,
        },
        legend: {
            enabled: false
        },
        xAxis: {
            categories: chart_data['x'],
            title: {
                text: null
            }
        },
        yAxis: {
            min: 0,
            title: {
                text: '得分',
                align: 'high'
            },

        },

        plotOptions: {
            bar: {
                barWidth: 5,
                dataLabels: {
                    enabled: true,
                    allowOverlap: true // 允许数据标签重叠
                }
            }
        },

        series: [{
            name: '',
            data: chart_data['data']
        }]
    });
}    
// 折线图函数，输入为id和作图数据
function line_chart(chart_name, chart_data) {
    var chart = Highcharts.chart(chart_name, {
        title: {
            text: '营商环境司法建设总体态势'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: chart_data['xCategory']
        },
        yAxis: {
            min: 50,
            max: 90,
            title: {
                text: '得分'
            },
            // categories: chart_data['yCategory']
        },
        credits: {
            enabled: false,
        },
        exporting: {
            enabled: false,
        },
        legend: {
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'bottom'
        },
        plotOptions: {
            series: {
                label: {
                    connectorAllowed: false
                },
                dataLabels: {
                    align: 'center',
                    enabled: false
                }
            }
        },
        series: chart_data['series'],
        responsive: {
            rules: [{
                condition: {
                    maxWidth: 500
                },
                chartOptions: {
                    legend: {
                        layout: 'horizontal',
                        align: 'center',
                        verticalAlign: 'bottom'
                    }
                }
            }]
        }
    });
}

// 热力图函数，输入为id和作图数据
function heat_chart(chart_name, chart_data){
    $.getJSON('https://data.jianshukeji.com/jsonp?filename=geochina/chongqing.json&callback=?', function (mapdata) {
        var data = chart_data;
        map1 = new Highcharts.Map('chart2', {
            title: {
                text: '2019重庆营商环境司法建设得分'
            },
            mapNavigation: {
                enabled: true,
                buttonOptions: {
                    verticalAlign: 'bottom'
                }
            },
            credits: {
                enabled: false,
            },
            exporting: {
                enabled: false,
            },
            colorAxis: {
                min: 60,
                max: 100,
                minColor: '#fff',
                maxColor: '#0087ee',
                labels: {
                    style: {
                        "color": "red", "fontWeight": "bold"
                    }
                }
            },
            series: [{
                data: data,
                mapData: mapdata,
                joinBy: 'name',
                name: '重庆市地图'
            }]
        });
    });
}
        // 柱状图函数，输入id和作图数据
function hist_chart(chart_name, chart_data){
    var chart = Highcharts.chart(chart_name, {
        chart: {
            type: 'column'
        },
        title: {
            text: '重庆营商环境司法指标态势'
        },
        exporting: {
            enabled: false
        },
        credits: {
            enabled: false
        },
        xAxis: {
            categories: chart_data['xCategory'],
            crosshair: true
        },
        yAxis: {
            min: 0,
            max: 100,
            title: {
                text: '得分'
            }
        },
        tooltip: {
            // head + 每个 point + footer 拼接成完整的 table
            headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
            pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
            '<td style="padding:0"><b>{point.y:.1f}</b></td></tr>',
            footerFormat: '</table>',
            shared: true,
            useHTML: true
        },
        plotOptions: {
            column: {
                borderWidth: 0
            },
            series: {
                dataLabels: {
                    enabled: true
                }
            }
        },
        series: chart_data['series']
    });
}
        // 仪表图函数，输入id
function gauge_chart_pccl(chart_name1, chart_name2){
    // 时间
    var chart7 = Highcharts.chart(chart_name1, {
        chart: {
            type: 'solidgauge'
        },
        title: null,
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false,
        },
        pane: {
            center: ['62.2%', '60%'],
            size: '66%',
            startAngle: 0,
            endAngle: 360,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '70%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },
        tooltip: {
            enabled: false
        },
        yAxis: {
            stops: [
                [0.1, '#d2e9ff'],
                [0.2, '#acd6ff'],
                [0.3, '#84c1ff'],
                [0.4, '#46a3ff'],
                [0.5, '#2894ff'],
                [0.6, '#0080ff'],
                [0.7, '#0072e3'],
                [0.8, '#0066cc'],
                [0.9, '#004b97'],
                [1.0, '#003d79']
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            labels: {
                y: 18
            },
            min: 0,
            max: 100,
            title: {
                text: '回收率',
                y: -67,
                style: {
                    "fontSize": "medium",
                }
            }
        },
        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: -20,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        },
        series: [{
            name: '回收率',
            data: [39.8],
            innerRadius: 70,
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:24px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                    '<span style="font-size:12px;color:silver"></span></div>'
            },
            tooltip: {
                valueSuffix: ''
            }
        }]
    });
    // 成本
    var chart8 = Highcharts.chart(chart_name2, {
        chart: {
            type: 'solidgauge'
        },
        title: null,
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false,
        },
        pane: {
            center: ['62.2%', '60%'],
            size: '66%',
            startAngle: 0,
            endAngle: 360,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '70%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },
        tooltip: {
            enabled: false
        },
        yAxis: {
            stops: [
                [0.1, '#d2e9ff'],
                [0.2, '#acd6ff'],
                [0.3, '#84c1ff'],
                [0.4, '#46a3ff'],
                [0.5, '#2894ff'],
                [0.6, '#0080ff'],
                [0.7, '#0072e3'],
                [0.8, '#0066cc'],
                [0.9, '#004b97'],
                [1.0, '#003d79']
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            labels: {
                y: 18
            },
            min: 0,
            max: 100,
            title: {
                text: '破产框架力度指数',
                y: -67,
                style: {
                    "fontSize": "medium",
                }
            }
        },
        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: -20,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        },
        series: [{
            name: '破产框架力度指数',
            data: [84.4],
            innerRadius: 70,
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:24px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                    '<span style="font-size:12px;color:silver"></span></div>'
            },
            tooltip: {
                valueSuffix: ''
            }
        }]
    });
    // 司法程序质量指数
}
function gauge_chart_htzx(chart_name1, chart_name2, chart_name3){
    // 时间
    var chart9 = Highcharts.chart(chart_name1, {
        chart: {
            type: 'solidgauge'
        },
        title: null,
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false,
        },
        pane: {
            center: ['53%', '56%'],
            size: '75%',
            startAngle: 0,
            endAngle: 360,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '70%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },
        tooltip: {
            enabled: false
        },
        yAxis: {
            stops: [
                [0.1, '#d2e9ff'],
                [0.2, '#acd6ff'],
                [0.3, '#84c1ff'],
                [0.4, '#46a3ff'],
                [0.5, '#2894ff'],
                [0.6, '#0080ff'],
                [0.7, '#0072e3'],
                [0.8, '#0066cc'],
                [0.9, '#004b97'],
                [1.0, '#003d79']
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            labels: {
                y: 18
            },
            min: 0,
            max: 100,
            title: {
                text: '时间',
                y: -62,
                style: {
                    "fontSize": "medium",
                }
            }
        },
        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: -20,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        },
        series: [{
            name: '时间',
            data: [70.1],
            innerRadius: 70,
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:24px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                    '<span style="font-size:12px;color:silver"></span></div>'
            },
            tooltip: {
                valueSuffix: ''
            }
        }]
    });
    // 成本
    var chart10 = Highcharts.chart(chart_name2, {
        chart: {
            type: 'solidgauge'
        },
        title: null,
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false,
        },
        pane: {
            center: ['53%', '56%'],
            size: '75%',
            startAngle: 0,
            endAngle: 360,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '70%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },
        tooltip: {
            enabled: false
        },
        yAxis: {
            stops: [
                [0.1, '#d2e9ff'],
                [0.2, '#acd6ff'],
                [0.3, '#84c1ff'],
                [0.4, '#46a3ff'],
                [0.5, '#2894ff'],
                [0.6, '#0080ff'],
                [0.7, '#0072e3'],
                [0.8, '#0066cc'],
                [0.9, '#004b97'],
                [1.0, '#003d79']
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            labels: {
                y: 18
            },
            min: 0,
            max: 100,
            title: {
                text: '成本',
                y: -62,
                style: {
                    "fontSize": "medium",
                }
            }
        },
        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: -20,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        },
        series: [{
            name: '成本',
            data: [83.1],
            innerRadius: 70,
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:24px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                    '<span style="font-size:12px;color:silver"></span></div>'
            },
            tooltip: {
                valueSuffix: ''
            }
        }]
    });
    // 司法程序质量指数
    var chart11 = Highcharts.chart(chart_name3, {
        chart: {
            type: 'solidgauge'
        },
        title: null,
        credits: {
            enabled: false
        },
        exporting: {
            enabled: false,
        },
        pane: {
            center: ['53%', '56%'],
            size: '75%',
            startAngle: 0,
            endAngle: 360,
            background: {
                backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#EEE',
                innerRadius: '70%',
                outerRadius: '100%',
                shape: 'arc'
            }
        },
        tooltip: {
            enabled: false
        },
        yAxis: {
            stops: [
                [0.1, '#d2e9ff'],
                [0.2, '#acd6ff'],
                [0.3, '#84c1ff'],
                [0.4, '#46a3ff'],
                [0.5, '#2894ff'],
                [0.6, '#0080ff'],
                [0.7, '#0072e3'],
                [0.8, '#0066cc'],
                [0.9, '#004b97'],
                [1.0, '#003d79']
            ],
            lineWidth: 0,
            minorTickInterval: null,
            tickPixelInterval: 400,
            tickWidth: 0,
            labels: {
                y: 18
            },
            min: 0,
            max: 100,
            title: {
                text: '司法程序质量指数',
                y: -62,
                style: {
                    "fontSize": "medium",
                }
            }
        },
        plotOptions: {
            solidgauge: {
                dataLabels: {
                    y: -20,
                    borderWidth: 0,
                    useHTML: true
                }
            }
        },
        series: [{
            name: '司法程序质量指数',
            data: [91.7],
            innerRadius: 70,
            dataLabels: {
                format: '<div style="text-align:center"><span style="font-size:24px;color:' +
                    ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y:.1f}</span><br/>' +
                    '<span style="font-size:12px;color:silver"></span></div>'
            },
            tooltip: {
                valueSuffix: ''
            }
        }]
    });
}
        // 蜘蛛图函数，输入id和作图数据
function spider_map(chart_name, chart_data){
    var chart = Highcharts.chart(chart_name, {
        chart: {
            polar: true,
            type: 'line'
        },
        title: {
            text: chart_data['title'],
            x: 0,
            y: 8
        },
        credits: {
            enabled: false,
        },
        exporting: {
            enabled: false,
        },
        pane: {
            size: '90%'
        },
        xAxis: {
            categories: chart_data['x'],
            tickmarkPlacement: 'on',
            lineWidth: 0
        },
        yAxis: {
            gridLineInterpolation: 'polygon',
            lineWidth: 0,
            min: 0,
            max: 100
        },
        tooltip: {
            shared: true,
            pointFormat: '<span style="color:{series.color}">{series.name}: <b>${point.y:,.1f}</b><br/>'
        },
        legend: {
            align: 'right',
            verticalAlign: 'right',
            layout: 'vertical'
        },
        series: chart_data['series']
    });
}
bar_chart('chart21', {{ rank_data | safe}});
bar_chart('chart33', {{ diff_data | safe }});
line_chart('chart23', {{ line_data | safe }});
heat_chart('chart22', {{ map_data | safe }});
hist_chart('chart24', {{ hist_data | safe }});
// gauge_chart_pccl('chart27', 'chart28');
// gauge_chart_htzx('chart29', 'chart30', 'chart31');
spider_map('chart32', {{ spider_data | safe }});

</script>
{% endblock %}