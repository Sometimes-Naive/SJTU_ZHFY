{% load static %}
<script type="text/javascript">
function pie_chart(chart_name, chart_data){
    // console.log(chart_data);
    Highcharts.chart(chart_name[0], {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        credits:{
            enabled:false,
        },
        exporting:{
            enabled:false,
        },
        title: {
            text: chart_name[1]
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
	            allowPointSelect: true,
	            cursor: 'pointer',
	            dataLabels: {
	                enabled: false
	            },
	            showInLegend: true
            }
        },
        series: [{
            name: '案件数',
            colorByPoint: true,
            data: chart_data
        }]
    });
}

function his_chart(chart_name, chart_data){
    Highcharts.chart(chart_name,{
        chart: {
        	type: 'bar'
        },
        credits:{
            enabled:false
        },
        title: {
        	text: '各地区收案情况'
        },
        exporting:{
        	enabled:false,
        },
        legend:{
            enabled:false
        },
        xAxis: {
        	categories: chart_data[0],
	        title: {
	        	text: null
	        }
        },
        yAxis: {
	        min: 0,
	        title: {
		        text: '案件数量',
		        align: 'high'
	        },
        },
        plotOptions: {
	        bar: {
		        dataLabels: {
		            enabled: true,
		            allowOverlap: true // 允许数据标签重叠
		        }
	        }
        },
        series: [ {
	        name: '',
	        data: chart_data[1]
        }]
    })
}


function map_chart(name, data){
    $.getJSON('https://data.jianshukeji.com/jsonp?filename=geochina/chongqing.json&callback=?', function(mapdata) {
    // $.getJSON("{% static 'js/chongqing.json' %}",function(mapdata) {
            map1 = new Highcharts.Map('chart3', {
                title: {
                	text: '重庆地区案件分布'
                },
                mapNavigation: {
	                enabled: true,
	                buttonOptions: {
	                    verticalAlign: 'bottom'
	                }
                },
                credits:{
                	enabled:false,
                },
                exporting:{
                	enabled:false,
                },
                colorAxis: {
	                min: 0,
	                minColor: '#fff',
	                maxColor: '#006cee',
	                labels:{
	                    style:{
	                        "color":"red","fontWeight":"bold"
	                    }
	                }
                },
                series: [{
	                data: data,
	                mapData: mapdata,
	                joinBy: 'name',
	                name: '重庆市地图'
                }]
            });
    });
}
    

function line_chart(chart_name, chart_data){
    Highcharts.chart(chart_name, {
        title: {
        	text: '案件时间趋势'
        },
        subtitle: {
        	text: ''
        },
        xAxis: {
        	categories: chart_data[0]
        },
        yAxis: {
	        title: {
	        	text: '案件数量'
	        }
        },
        credits:{
        	enabled:false,
        },
        exporting:{
        	enabled:false,
        },
        legend: {
	        layout: 'vertical',
	        align: 'right',
	        verticalAlign: 'middle'
        },
        plotOptions: {
	        series: {
		        label: {
		            connectorAllowed: false
		        },
	        }
        },
        series: chart_data[1],
        responsive: {
	        rules: [{
		        condition: {
		            maxWidth: 500
		        },
		        chartOptions: {
		            legend: {
		                layout: 'horizontal',
		                align: 'center',
		                verticalAlign: 'bottom'
		            }
		        }
	        }]
        }
    })
}

function line1_chart(chart_name, chart_data){
    var chart = Highcharts.chart(chart_name, {
        chart: {
        	type: 'areaspline'
        },
        title: {
        	text: '案件数量总览'
        },
        xAxis: {
        	categories: chart_data[0]
        },
        legend: {
	        layout: 'vertical',
	        align: 'left',
	        verticalAlign: 'top',
	        x: 150,
	        y: 100,
	        floating: true,
	        borderWidth: 1,
	        backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
        },
        yAxis: {
	        title: {
	        	text: '案件数量'
	        }
        },
        credits:{
        	enabled:false,
        },
        exporting:{
        	enabled:false,
        },

        tooltip: {
	        shared: true,
	        valueSuffix: ' 件'
        },
        plotOptions: {
	        areaspline: {
	        	fillOpacity: 0.5
	        }
        },
        series: chart_data[1]
    });
}

function bubble_chart(chart_name, chart_data){
    Highcharts.chart(chart_name, {
        chart: {
	        type: 'packedbubble',
	        height: '70%'
        },
        title: {
        	text: '案件案由数量'
        },
        tooltip: {
	        useHTML: true,
	        pointFormat: '<b>{point.name}:</b> {point.y}'
        },
        plotOptions: {
	        packedbubble: {
		        minSize: '30%',
		        maxSize: '120%',
		        zMin: 0,
		        zMax: 20000,
		        layoutAlgorithm: {
		            splitSeries: false,
		            gravitationalConstant: 0.02
		        },
		        dataLabels: {
		            enabled: true,
		            format: '{point.name}',
		            filter: {
		                property: 'y',
		                operator: '>',
		                value: 2000
		            },
		            style: {
		                color: 'black',
		                textOutline: 'none',
		                fontWeight: 'normal'
		            }
	        	}
	        }
        },
        credits:{
        	enabled:false,
        },
        exporting:{
        	enabled:false,
        },
        series: chart_data
    });
}



</script>